<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LegalMentor TEST | Rasmiy Versiya</title>
    
    <style>
        /* 7. Mobil Ekran uchun Asosiy Uslublar */
        body {
            font-family: Arial, sans-serif;
            margin: 0; 
            padding-top: 60px; /* Taymer uchun joy qoldirish */
            background-color: #f0f2f5;
            color: #333;
            /* 5. Matn tanlashni o'chirish */
            -webkit-user-select: none; 
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        /* 9. Qattiq Taymer Konteyneri (Fixed Position) */
        .timer-bar {
            position: fixed; /* Joyidan siljimasligi uchun */
            top: 0;
            left: 0;
            width: 100%;
            height: 50px;
            background-color: #0056b3;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.4em;
            font-weight: bold;
            z-index: 1000; /* Boshqa elementlardan ustun turishi uchun */
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .timer-warning {
            background-color: #dc3545; /* Qizil rang 5 daqiqa qolganda */
        }

        /* 6. Logotip va Sarlavha Uslubi */
        .header {
            text-align: center;
            padding: 15px 10px;
            background-color: #ffffff;
            border-bottom: 2px solid #0056b3;
            margin-bottom: 15px;
        }
        .header img {
            max-width: 150px; /* Logotip razmeri */
            height: auto;
            margin-bottom: 10px;
        }
        h1 {
            font-size: 1.5em;
            margin: 0;
            color: #0056b3;
        }

        /* Savol Konteynerlari */
        .question-container {
            margin: 0 10px 15px;
            padding: 15px;
            border-radius: 8px;
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .question-text {
            font-weight: bold;
            margin-bottom: 10px;
            line-height: 1.4;
        }
        .answer-text {
            color: #333;
            display: block;
            margin-bottom: 5px;
            line-height: 1.4;
            white-space: pre-wrap;
        }

        /* Tanlash Tugmalari (Mobil uchun moslashuvchan) */
        .answer-selection-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            justify-content: space-between;
        }
        .answer-label {
            flex: 1; /* Teng kenglikda bo'lishi uchun */
            text-align: center;
            cursor: pointer;
            padding: 8px 5px;
            border: 1px solid #ccc;
            border-radius: 20px;
            transition: background-color 0.2s, border-color 0.2s;
            font-weight: bold;
            min-width: 40px;
        }
        input[type="radio"] { display: none; }
        input[type="radio"]:checked + .answer-label {
            background-color: #4CAF50;
            color: white;
            border-color: #4CAF50;
        }
        
        /* Natija Maydoni Uslubi */
        .result-section {
            margin: 20px 10px;
            padding: 20px;
            background-color: #e9ecef;
            border-radius: 8px;
        }
        #result-field {
            width: 100%;
            min-height: 50px;
            padding: 10px;
            margin-top: 10px;
            border: 2px dashed #007bff;
            border-radius: 5px;
            font-size: 1.1em;
            letter-spacing: 1px;
            box-sizing: border-box;
            text-align: center;
            /* Nusxalanadigan matnni tanlashga ruxsat berish */
            user-select: text;
            -webkit-user-select: text;
            -moz-user-select: text;
        }
        .copy-button {
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            font-size: 1em;
            width: 100%; /* Mobil uchun to'liq kenglik */
        }
        .copy-button:hover {
            background-color: #0056b3;
        }
        .copy-message {
            color: #4CAF50; 
            font-weight: bold; 
            margin-top: 10px; 
            visibility: hidden;
        }
    </style>
</head>
<body>

    <div id="timer-display" class="timer-bar">
        Vaqt: 60:00
    </div>

    <div class="header">
        <img src="https://asliddinburanov-prog.github.io/LegalMentor-test/2.jpg" alt="LegalMentor Logotipi">
        <h1>Test Savollari</h1>
    </div>

    <div style="margin: 0 10px; padding: 10px; background-color: #fff3cd; color: #856404; border-radius: 5px; font-weight: bold; text-align: center;">
        ‚ö†Ô∏è DIQQAT: Testni bir urinishda yakunlang. Nusxalash va ekranni rasmga olish cheklangan!
    </div>

    <div id="questions-list">
        </div>

    <div class="result-section">
        <label for="result-field" style="display: block; font-weight: bold;">Javob Belgilari (Nusxalanadigan maydon):</label>
        <textarea id="result-field" readonly placeholder="Barcha javoblar belgilangandan so'ng bu yerda avtomatik ko'rinadi..."></textarea>
        <button id="copy-button" class="copy-button">Belgilarni Nusxalash</button>
        <p id="copy-message" class="copy-message">‚úÖ Muvaffaqiyatli nusxalandi!</p>
    </div>

    <script>
        // =============================================================
        //  ‚úÖ SAVOLLAR RO'YXATI (30 ta savol shabloni)
        // =============================================================
        // Savollarni tahrirlash juda oson, matnni almashtirsangiz kifoya.
        
        const customQuestions = [
            // 1-3 savollar (Sizning namunangiz)
            `Alohida mol-mulkka ega bo‚Äòlgan hamda o‚Äòz
majburiyatlari yuzasidan ushbu mol-mulk bilan
javob beradigan, majburiyatlarni bajara
oladigan, sudda da‚Äôvogar va javobgar bo‚Äòla
oladigan tashkilot ‚Ä¶ hisoblanadi.
A) yuridik shaxs
B) tijorat tashkiloti
C) jamiyat
D) davlat organi`,

            `‚ÄúMa‚Äôlum bir axloqiy sifatlarga ega bo‚Äòlmasdan, munosib inson bo‚Äòlmay turib, ijtimoiy hayotda harakat qilib bo‚Äòlmaydi‚Äù.
Ushbu fikr kim tomonidan aytilgan?
A) Arastu 
B) Alisher Navoiy
C) Konfutsiy 
D) Abu Ali ibn Sino`, // E'tibor bering, bu yerda variant tartibi muhim emas

            `"Quyidagilardan qaysi biri davlatning belgisi hisoblanmaydi?
A) Davlat paydo bo‚Äòlgan jamiyatda fuqarolar ma‚Äôlum bir hududga birlashadilar
B) Davlat o‚Äòz faoliyatini amalga oshirishi uchun murakkab tizimdan tashkil topgan boshqaruv apparatiga ega bo‚Äòladi
C) Davlat hokimiyatni to‚Äòlaqonli amalga oshirish uchun qonunlar va turli normativ hujjatlar qabul qiladi
D) Davlat odamlarning ijtimoiy hokimiyati yordamida boshqariladi, ya‚Äôni davlatni boshqarishda uning barcha fuqarolari ishtirok etadi`,

            `To‚Äòg‚Äòri moslashtirilgan javobni aniqlang. 
            I. Unitar davlat; II. Federativ davlat. a) Qozog‚Äòiston; b) Braziliya; c) Argentina; d) Buyuk Britaniya.
A) I ‚Äì a, c; II ‚Äì b, d 
B) I ‚Äì a, d; II ‚Äì b, c
C) I ‚Äì b, c; II ‚Äì a, d 
D) I ‚Äì b, d; II ‚Äì a, c`,

            `Qaysi javobda davlat funksiyalarining faoliyat ko‚Äòrsatish makoni bo‚Äòyicha (a) va faoliyat ko‚Äòrsatsih muddati bo‚Äòyicha (b) tasniflanishi to‚Äòg‚Äòri ko‚Äòrsatilgan?
1) asosiy; 2) vaqtinchalik; 3) ichki; 4) doimiy; 5) asosiy bo‚Äòlmagan; 6) tashqi; 7) xalqaro; 8) milliy.
A) a ‚Äì 1, 5; b ‚Äì 3, 6 
B) a ‚Äì 1, 5; b ‚Äì 7, 8
C) a ‚Äì 2, 5; b ‚Äì 3, 7 
D) a ‚Äì 2, 4; b ‚Äì 3, 6`
        ];
        
        const totalQuestions = customQuestions.length;
        const questionsList = document.getElementById('questions-list');
        const resultField = document.getElementById('result-field');
        const currentAnswers = {};
        const copyButton = document.getElementById('copy-button');
        const copyMessage = document.getElementById('copy-message');

        // Savol matnini asosiy matn va variantlarga ajratish funksiyasi
        function parseQuestion(fullText) {
            const lines = fullText.split('\n').map(line => line.trim()).filter(line => line.length > 0);
            let questionBody = [];
            let options = {};
            let isOptionsStarted = false;

            lines.forEach(line => {
                if (line.match(/^[A-D][\.\)]\s/i)) {
                    isOptionsStarted = true;
                    const key = line[0].toLowerCase();
                    options[key] = line; 
                } else if (!isOptionsStarted) {
                    questionBody.push(line);
                }
            });
            return {
                questionBody: questionBody.join('<br>'),
                options: options
            };
        }

        // Savollarni HTML ga joylash
        function renderQuestions() {
            for (let i = 0; i < totalQuestions; i++) {
                const qId = i + 1;
                const qData = parseQuestion(customQuestions[i]);

                const qContainer = document.createElement('div');
                qContainer.className = 'question-container';
                qContainer.setAttribute('data-question-id', qId);

                const qText = document.createElement('div');
                qText.className = 'question-text';
                qText.innerHTML = `${qId}. ${qData.questionBody}`;
                qContainer.appendChild(qText);
                
                // Variant matnini chiqarish
                const optionsGroup = document.createElement('div');
                optionsGroup.className = 'options-group';
                const variantKeys = ['a', 'b', 'c', 'd'];
                
                variantKeys.forEach(key => {
                    const variantText = qData.options[key];
                    if (variantText) {
                        const answerDisplayText = document.createElement('div');
                        answerDisplayText.className = 'answer-text';
                        answerDisplayText.textContent = variantText;
                        optionsGroup.appendChild(answerDisplayText);
                    }
                });

                // Radio tugmalarini yaratish (A, B, C, D)
                const selectionGroup = document.createElement('div');
                selectionGroup.className = 'answer-selection-group';

                variantKeys.forEach(variant => {
                    const radioId = `q${qId}${variant}`;
                    const input = document.createElement('input');
                    input.type = 'radio';
                    input.id = radioId;
                    input.name = `question${qId}`;
                    input.value = variant;
                    input.addEventListener('change', () => updateResult(qId, variant));
                    
                    const label = document.createElement('label');
                    label.className = 'answer-label';
                    label.htmlFor = radioId;
                    label.textContent = variant.toUpperCase();

                    selectionGroup.appendChild(input);
                    selectionGroup.appendChild(label);
                });
                
                optionsGroup.appendChild(selectionGroup);
                qContainer.appendChild(optionsGroup);
                questionsList.appendChild(qContainer);
            }
        }

        // Javoblarni yig'ish va yangilash funksiyasi
        function updateResult(qId, answer) {
            const resultTag = qId + answer;
            currentAnswers[qId] = resultTag;
            
            let resultString = '';
            for (let i = 1; i <= totalQuestions; i++) {
                if (currentAnswers[i]) {
                    resultString += currentAnswers[i];
                }
            }
            resultField.value = resultString;
        }

        // 8. Nusxalash funksiyasi (Barcha savollarni tekshirish)
        async function copyResult(event) {
            event.preventDefault();
            
            let unmarkedQIds = [];
            for (let i = 1; i <= totalQuestions; i++) {
                if (!currentAnswers[i]) {
                    unmarkedQIds.push(i);
                }
            }
            
            if (unmarkedQIds.length > 0) {
                // 8. Belgilanmagan savollarni aniq ko'rsatish
                alert(`‚ö†Ô∏è Nusxalashdan oldin barcha ${totalQuestions} savolni belgilashingiz kerak.\n\nBelgilanmagan savollar raqami: ${unmarkedQIds.join(', ')}`);
                return;
            }

            try {
                // Clipboard API orqali nusxalash
                await navigator.clipboard.writeText(resultField.value);
                copyMessage.style.visibility = 'visible';
                setTimeout(() => {
                    copyMessage.style.visibility = 'hidden';
                }, 2000);
            } catch (err) {
                // Agar Clipboard API ishlamasa, eski usulda nusxalashga majburlash
                resultField.select();
                document.execCommand("copy");
                alert("‚úÖ Barcha javob belgilari muvaffaqiyatli nusxalandi! (" + resultField.value + ")");
                copyMessage.style.visibility = 'visible';
                setTimeout(() => { copyMessage.style.visibility = 'hidden'; }, 2000);
            }
        }

        // 9. Taymer Mantiqi
        const timeLimit = 60 * 60; // 60 daqiqa * 60 soniya
        let timeLeft = timeLimit;
        const timerDisplay = document.getElementById('timer-display');
        const warningTime = 5 * 60; // 5 daqiqa

        function formatTime(seconds) {
            const min = Math.floor(seconds / 60);
            const sec = seconds % 60;
            return `Vaqt: ${min.toString().padStart(2, '0')}:${sec.toString().padStart(2, '0')}`;
        }

        function updateTimer() {
            timeLeft--;
            timerDisplay.textContent = formatTime(timeLeft);

            if (timeLeft <= warningTime) {
                // 9. 5 daqiqa qolganda ogohlantirish
                timerDisplay.classList.add('timer-warning');
            }

            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                timerDisplay.textContent = "Vaqt tugadi!";
                timerDisplay.classList.remove('timer-warning');
                timerDisplay.style.backgroundColor = '#000';
                
                // Vaqt tugagach testni bloklash
                document.querySelectorAll('input[type="radio"]').forEach(input => {
                    input.disabled = true;
                });
                alert("üî¥ Testga ajratilgan vaqt tugadi! Javoblarni nusxalab olishingiz mumkin.");
            }
        }

        // --- Boshlash ---
        document.addEventListener('DOMContentLoaded', () => {
            renderQuestions();
            
            // Taymerni ishga tushirish
            timerDisplay.textContent = formatTime(timeLeft);
            const timerInterval = setInterval(updateTimer, 1000);
            
            // Nusxalash tugmasini funksiyaga bog'lash
            copyButton.addEventListener('click', copyResult);

            // 4. Qattiq Cheklovlar Qismi
            // O'ng tugmani bosishni bloklash
            document.addEventListener('contextmenu', e => e.preventDefault());

            // Klaviatura orqali asosiy nusxalashni bloklash
            document.addEventListener('keydown', e => {
                // Ctrl+C, Ctrl+X, Ctrl+V, Ctrl+A ni bloklash
                if ((e.ctrlKey || e.metaKey) && (['c', 'x', 'v', 'a'].includes(e.key.toLowerCase()))) {
                    e.preventDefault();
                    // Bu yerda ogohlantirishni o'chirish yaxshiroq, chunki u doimiy chalaveradi
                }
                // F12 (Developer tools) ni bloklash (Ba'zi brauzerlarda ishlamaydi)
                if (e.key === 'F12') {
                     e.preventDefault();
                }
            });
        });
        
    </script>
</body>

</html>



